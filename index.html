<!-- Bootstrap 2.3.1 -->
<link class="cssdeck" rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/bootstrap-responsive.min.css" class="cssdeck">

<script>

function addUser() {
	var xmlhttp;
	
	if (window.XMLHttpRequest) {
	    // code for IE7+, Firefox, Chrome, Opera, Safari
	    xmlhttp = new XMLHttpRequest();
	} else {
	    // code for IE6, IE5
	    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange = function() {
	    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
	        console.log(xmlhttp.responseText);
	        insertUser(document.getElementById("usernameText").value, document.getElementById("passwordText").value);
	    }
	}

	var username = document.getElementById("usernameText").value;
	console.log("usernameText=",username);
	xmlhttp.open("GET","userSigninConfirm.php?username="+username,true);
	xmlhttp.send();
}

function insertUser(username, password) {
	var xmlhttp;
	
	if (window.XMLHttpRequest) {
	    // code for IE7+, Firefox, Chrome, Opera, Safari
	    xmlhttp = new XMLHttpRequest();
	} else {
	    // code for IE6, IE5
	    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange = function() {
	    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
	        console.log("insertUser", xmlhttp.responseText);
	        alert("User has been created.");
	        loginConfirm(document.getElementById("usernameText").value, document.getElementById("passwordText").value);
	    }
	}

	console.log("username=",username,"password=",password);
	xmlhttp.open("GET","addUser.php?username="+username+"&password="+password,true);
	xmlhttp.send();
}

function loginConfirm() {
	var xmlhttp;
	var username=document.getElementById("username").value;
	var password=document.getElementById("password").value;
	console.log(username,password);

	if (window.XMLHttpRequest) {
	    // code for IE7+, Firefox, Chrome, Opera, Safari
	    xmlhttp = new XMLHttpRequest();
	} else {
	    // code for IE6, IE5
	    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange = function() {
	    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
	        console.log(xmlhttp.responseText);
	        if(xmlhttp.responseText == "success"){	
		        alert("Login successful.");	        
	        	window.location.href = "login.php?username="+username;
	        }
	        else {
		        alert("Wrong credentials.");
		    }
	    }
	}

	console.log("username=",username,"password=",password);
	xmlhttp.open("GET","loginConfirm.php?username="+username+"&password="+password,true);
	xmlhttp.send();
}


</script>

<div class="" id="loginModal">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
		<h3>Area Information App Login and Signup</h3>
	</div>
	<div class="modal-body">
		<div class="well">
			<ul class="nav nav-tabs">
				<li class="active"><a href="#login" data-toggle="tab">Login</a></li>
				<li><a href="#create" data-toggle="tab">Create Account</a></li>
			</ul>
			<div id="myTabContent" class="tab-content" >
				<div class="tab-pane active in" id="login">
					<form class="form-horizontal" action='javascript:loginConfirm()'>
						<fieldset>
							<div id="legend">
								<legend class="">Login</legend>
							</div>    
							<div class="control-group">
								<!-- Username -->
								<label class="control-label"  for="username">Username</label>
								<div class="controls">
									<input type="text" id="username" name="username" placeholder="" class="input-xlarge">
								</div>
							</div>
							
							<div class="control-group">
								<!-- Password-->
								<label class="control-label" for="password">Password</label>
								<div class="controls">
									<input type="password" id="password" name="password" placeholder="" class="input-xlarge">
								</div>
							</div>
							
							
							<div class="control-group">
								<!-- Button -->
								<div class="controls">
									<button class="btn btn-success">Login</button>
								</div>
							</div>
						</fieldset>
					</form>                
				</div>
				<div class="tab-pane fade" id="create">
					<form id="tab" action="javascript:addUser();">
						<label class="control-label"  for="username">Username</label>
						<div class="controls">
							<input id="usernameText" type="text" value="" class="input-xlarge">
						</div>
						<label class="control-label" for="password">Password</label>
						<div class="controls">
							<input id="passwordText" type="password" value="" class="input-xlarge">
						</div>
						<label class="control-label"  for="email">Email</label>
						<div class="controls">
							<input type="text" value="" class="input-xlarge">
						</div>
						<div class="control-group">
							<div class="controls">
								<button class="btn btn-primary">Create Account</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
		
<!-- jQuery 1.9.1 -->
<script class="cssdeck" src="js/jquery.min.js"></script>
<!-- Bootstrap 2.3.1 -->
<script class="cssdeck" src="js/bootstrap.min.js"></script>